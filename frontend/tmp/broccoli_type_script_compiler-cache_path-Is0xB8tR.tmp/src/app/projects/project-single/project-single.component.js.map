{"version":3,"file":"project-single.component.js","sourceRoot":"","sources":["project-single.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {CanDeactivate, OnActivate, Router, RouteSegment} from '@angular/router';\n// import {RouteParams} from '@angular/router-deprecated/index';\nimport {\n    ViewModel,\n    ViewService,\n    UserService,\n    ProjectService\n} from '../../shared';\n\n\n@Component({\n    moduleId: module.id,\n    selector: 'app-project-single',\n    templateUrl: 'project-single.component.html',\n    styleUrls: ['project-single.component.css'],\n    bindings: [ProjectService, ViewService, UserService]\n})\n\n\nexport class ProjectSingleComponent {\n    private id:string;\n    private users;\n    private project;\n    private projectID;\n    private projectName;\n    private isFormWorking:Boolean = false;\n    private isWinVisible:Boolean = false;\n    private newView:ViewModel;\n    ngForm;\n\n    private viewsOfProject = new Array();\n\n    constructor(\n        curr: RouteSegment,\n        // params:RouteParams,\n                public projectService:ProjectService,\n                public userService:UserService,\n                public viewService:ViewService) {\n        this.id = curr.getParam('id');\n        // this.id = params.get('id');\n        console.log(this.id);\n    }\n\n    private getViewsOfProject(id) {\n        this.viewService.getViewsOfProject(id)\n            .subscribe(\n                data => {\n                    this.viewsOfProject = data;\n                    console.log(data);\n                },\n                error => console.error('Error: ' + error[0]),\n                () => {\n                }\n            );\n    }\n\n    private removeView() {\n\n    }\n\n    private hideAddViewWindow() {\n        this.isWinVisible = !this.isWinVisible;\n    }\n\n    private showAddViewWindow() {\n        this.isWinVisible = !this.isWinVisible;\n    }\n\n    getUsers() {\n        this.userService.getUsers()\n            .subscribe(\n                data => {\n                    this.users = data;\n                },\n                error => console.error('Error: ' + error[0]),\n                () => {\n                }\n            )\n    }\n\n    private createView() {\n        // var screenshotObj = {\n        //     url: this.newView.screenshotURL,\n        //     projectID: this.id,\n        //     file: 'sc'\n        // }\n        //\n        // this.screenshotService.make(screenshotObj).subscribe(\n        //     data => {\n        //         console.log(data);\n        //     },\n        //     error => console.error('Error: ' + error[0]),\n        //     () => {\n        //\n        //     }\n        // );\n        this.isFormWorking = true;\n        this.newView['projectID'] = this.id;\n        this.viewService.setView(this.newView).subscribe(\n            data => {\n                this.viewsOfProject.push(this.newView);\n                this.isWinVisible = !this.isWinVisible;\n                this.isFormWorking = false;\n            },\n            error => console.error('Error: ' + error[0]),\n            () => {\n\n            }\n        );\n    }\n\n    private getProjectData(id) {\n        this.projectService.getProject(id)\n            .subscribe(\n                data => {\n                    this.project = data;\n                    this.projectID = this.project._id;\n                    this.projectName = this.project.name;\n                },\n                error => console.error('Error: ' + error[0]),\n                () => {\n\n                }\n            );\n    }\n\n    ngOnInit() {\n        this.newView = <ViewModel>{\n            name: '',\n            description: '',\n            screenshotURL: ''\n        };\n\n        this.getProjectData(this.id);\n        this.getViewsOfProject(this.id);\n        this.getUsers();\n    }\n}"]}